<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RawStor Benchmark Dashboard</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä RawStor Performance Dashboard</h1>
        </header>
        <div class="charts-container">
            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
            <div class="chart" id="iops-by-config-chart">
                <h2>üöÄ IOPS –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º</h2>
                <div class="chart-content"></div>
                <div class="chart-filters">
                    <div class="filter-group">
                        <h3>üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</h3>
                        <div id="iops-config-filters"></div>
                    </div>
                    <div class="filter-group">
                        <h3>üìä –ú–µ—Ç—Ä–∏–∫–∏:</h3>
                        <div id="iops-metric-filters"></div>
                    </div>
                </div>
            </div>

            <div class="chart" id="latency-by-config-chart">
                <h2>‚è±Ô∏è Latency –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º</h2>
                <div class="chart-content"></div>
                <div class="chart-filters">
                    <div class="filter-group">
                        <h3>üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</h3>
                        <div id="latency-config-filters"></div>
                    </div>
                    <div class="filter-group">
                        <h3>üìä –ú–µ—Ç—Ä–∏–∫–∏:</h3>
                        <div id="latency-metric-filters"></div>
                    </div>
                </div>
            </div>


            <!-- –ì—Ä–∞—Ñ–∏–∫–∏ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –≤–µ—Ç–∫–∞–º -->
            <div class="chart" id="iops-by-branch-chart">
                <h2>üåø IOPS –ø–æ –≤–µ—Ç–∫–∞–º</h2>
                <div class="chart-content"></div>
                <div class="chart-filters">
                    <div class="filter-group">
                        <h3>üåø –í–µ—Ç–∫–∏:</h3>
                        <div id="iops-branch-filters"></div>
                    </div>
                    <div class="filter-group">
                        <h3>üìä –ú–µ—Ç—Ä–∏–∫–∏:</h3>
                        <div id="iops-branch-metric-filters"></div>
                    </div>
                </div>
            </div>

            <div class="chart" id="latency-by-branch-chart">
                <h2>üåø Latency –ø–æ –≤–µ—Ç–∫–∞–º</h2>
                <div class="chart-content"></div>
                <div class="chart-filters">
                    <div class="filter-group">
                        <h3>üåø –í–µ—Ç–∫–∏:</h3>
                        <div id="latency-branch-filters"></div>
                    </div>
                    <div class="filter-group">
                        <h3>üìä –ú–µ—Ç—Ä–∏–∫–∏:</h3>
                        <div id="latency-branch-metric-filters"></div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | <span id="last-update"></span></p>
            <p>–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤: <span id="data-info">0</span></p>
            <button id="refresh-data" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        </footer>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script src="data-loader.js"></script>
    <script src="utils.js"></script>
    <script src="charts.js"></script>
    <script src="app.js"></script>
    <script>
    // Fix –¥–ª—è CORS –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
    if (window.location.hostname === 'localhost') {
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
            if (url.includes('github.com')) {
                url = url.replace('github.com', 'github.com');
                options = options || {};
                options.mode = 'cors';
                options.credentials = 'omit';
            }
            return originalFetch.call(this, url, options);
        };
    }
    </script>
</body>
</html>